RewriteEngine On

# Add trailing slashes to directories if not present
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_URI} !/$
RewriteRule ^(.*[^/])$ $1/ [L,R=301]

# Remove trailing slashes for files
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} (.+)/$
RewriteRule ^ %1 [L,R=301]

# Rewrite URLs to the corresponding HTML files
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ $1/index.html [L]
RewriteRule ^(.*)$ $1.html [L]

# Serve index.html for directory requests
DirectoryIndex index.html

# Fallback to index.html for Single Page Applications (SPA)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.html [L]
